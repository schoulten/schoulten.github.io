<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Fernando da Silva">
<meta name="dcterms.date" content="2021-03-13">
<meta name="description" content="Quick and easy access to market expectations data of the Focus report from Central Bank of Brazil">
<title>Fernando da Silva - meedr: MacroEconomic Expectations Data in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="../../styles/css/styles.css">
<meta property="og:title" content="Fernando da Silva - meedr: MacroEconomic Expectations Data in R">
<meta property="og:description" content="Quick and easy access to market expectations data of the Focus report from Central Bank of Brazil">
<meta property="og:image" content="https://fortietwo.com/blog/2021-03-13-meedr-r-package/imgs/logo.png">
<meta property="og:site-name" content="Fernando da Silva">
<meta property="og:image:height" content="278">
<meta property="og:image:width" content="240">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Fernando da Silva</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html" rel="" target="">
 <span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../portfolio.html" rel="" target="">
 <span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/schoulten/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/schoulten" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:fernando@fortietwo.com" rel="" target=""><i class="bi bi-envelope-fill" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">meedr: MacroEconomic Expectations Data in R</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          Quick and easy access to market expectations data of the Focus report from Central Bank of Brazil
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Macroeconomics</div>
                <div class="quarto-category">Data</div>
                <div class="quarto-category">API</div>
                <div class="quarto-category">English</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Fernando da Silva </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 13, 2021</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">March 10, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#installation" id="toc-installation" class="nav-link active" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#features" id="toc-features" class="nav-link" data-scroll-target="#features">Features</a></li>
  <li>
<a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a>
  <ul class="collapse">
<li><a href="#get_monthly" id="toc-get_monthly" class="nav-link" data-scroll-target="#get_monthly">get_monthly()</a></li>
  <li><a href="#get_quarterly" id="toc-get_quarterly" class="nav-link" data-scroll-target="#get_quarterly">get_quarterly()</a></li>
  <li><a href="#get_annual" id="toc-get_annual" class="nav-link" data-scroll-target="#get_annual">get_annual()</a></li>
  <li><a href="#get_inflation_12m" id="toc-get_inflation_12m" class="nav-link" data-scroll-target="#get_inflation_12m">get_inflation_12m()</a></li>
  <li><a href="#get_monthly_top5" id="toc-get_monthly_top5" class="nav-link" data-scroll-target="#get_monthly_top5">get_monthly_top5()</a></li>
  <li><a href="#get_annual_top5" id="toc-get_annual_top5" class="nav-link" data-scroll-target="#get_annual_top5">get_annual_top5()</a></li>
  </ul>
</li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization">Data visualization</a></li>
  <li><a href="#github-repo-and-documentation" id="toc-github-repo-and-documentation" class="nav-link" data-scroll-target="#github-repo-and-documentation">GitHub repo and documentation</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content"><p>Very happy to announce that <a href="https://fortietwo.com/meedr/">meedr</a>, my first package on R, is on its way to CRAN!</p>
<p><strong>Note</strong>: This package was definitively archived by CRAN on July 22, 2021 and is only available on GitHub. Despite this, maintenance and bug fixes will continue to be done.</p>
<div class="grid">
<div class="g-col-10">
<p>The goal of <a href="https://fortietwo.com/meedr/">meedr</a> is to provide quick and easy access to market expectations data for the main macroeconomic indicators in the Focus report, made available by the <strong>Central Bank of Brazil</strong> through the <a href="https://olinda.bcb.gov.br/olinda/servico/Expectativas/versao/v1/aplicacao#!/recursos">Expectations System data API</a>. This data comes from several financial institutions such as banks, brokers, funds, consultancies, etc.</p>
</div>
<div class="g-col-2">
<p><img src="imgs/logo.png" align="right" height="139"></p>
</div>
</div>
<p>The <a href="https://fortietwo.com/meedr/">meedr</a> package offers an R interface to the API and other advantages:</p>
<ul>
<li>Use of a caching system with package <a href="https://memoise.r-lib.org">memoise</a> to speed up repeated requests for data;</li>
<li>Users can utilize all cores of the machine (parallel computing) when fetching a large batch of time series.</li>
</ul>
<section id="installation" class="level2"><h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>You can install the development version from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"schoulten/meedr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="features" class="level2"><h2 class="anchored" data-anchor-id="features">Features</h2>
<ul>
<li>To retrieve data from the API, there are several useful functions that connect to the endpoints:
<ul>
<li>Monthly market expectations with <a href="#get_monthly">get_monthly()</a>
</li>
<li>Quarterly market expectations with <a href="#get_quarterly">get_quarterly()</a>
</li>
<li>Annual market expectations with <a href="#get_annual">get_annual()</a>
</li>
<li>Market expectations for inflation over the next 12 months with <a href="#get_inflation_12m">get_inflation_12m()</a>
</li>
<li>Monthly market expectations for the Top 5 indicators with <a href="#get_monthly_top5">get_monthly_top5()</a>
</li>
<li>Annual market expectations for the Top 5 indicators with <a href="#get_annual_top5">get_annual_top5()</a>
</li>
</ul>
</li>
</ul></section><section id="example" class="level2"><h2 class="anchored" data-anchor-id="example">Example</h2>
<p>These are some basic examples of using the package:</p>
<section id="get_monthly" class="level3"><h3 class="anchored" data-anchor-id="get_monthly">get_monthly()</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(meedr)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># Monthly market expectations for IPCA indicator</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>meedr<span class="sc">::</span><span class="fu">get_monthly</span>(</span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="at">indicator      =</span> <span class="st">"IPCA"</span>,</span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="at">first_date     =</span> <span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="dv">30</span>,</span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="at">reference_date =</span> <span class="fu">format</span>(<span class="fu">Sys.Date</span>(), <span class="st">"%m/%Y"</span>),</span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="at">be_quiet       =</span> <span class="cn">TRUE</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 10
   indicator date       reference…¹  mean median    sd   min   max n_res…² basis
   &lt;chr&gt;     &lt;date&gt;     &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt; &lt;int&gt;
 1 IPCA      2023-03-03 03/2023     0.719  0.72  0.135  0.4   1.01      57     1
 2 IPCA      2023-03-03 03/2023     0.715  0.7   0.197  0.2   1.41     146     0
 3 IPCA      2023-03-02 03/2023     0.692  0.69  0.158  0.38  1.02      53     1
 4 IPCA      2023-03-02 03/2023     0.710  0.665 0.209  0.2   1.41     146     0
 5 IPCA      2023-03-01 03/2023     0.686  0.66  0.167  0.38  1.02      51     1
 6 IPCA      2023-03-01 03/2023     0.707  0.657 0.213  0.2   1.41     144     0
 7 IPCA      2023-02-28 03/2023     0.709  0.65  0.213  0.38  1.41      56     1
 8 IPCA      2023-02-28 03/2023     0.704  0.65  0.220  0.2   1.41     142     0
 9 IPCA      2023-02-27 03/2023     0.725  0.69  0.217  0.2   1.41     107     1
10 IPCA      2023-02-27 03/2023     0.703  0.65  0.219  0.2   1.41     142     0
# … with 22 more rows, and abbreviated variable names ¹​reference_date,
#   ²​n_respondents</code></pre>
</div>
</div>
</section><section id="get_quarterly" class="level3"><h3 class="anchored" data-anchor-id="get_quarterly">get_quarterly()</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Quarterly market expectations for GDP indicator</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>meedr<span class="sc">::</span><span class="fu">get_quarterly</span>(</span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="at">indicator      =</span> <span class="st">"PIB Total"</span>,</span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="at">first_date     =</span> <span class="st">"2021-01-01"</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="at">reference_date =</span> <span class="fu">paste0</span>(</span>
<span id="cb4-6"><a href="#cb4-6"></a>    lubridate<span class="sc">::</span><span class="fu">quarter</span>(<span class="fu">Sys.Date</span>()), <span class="st">"/"</span>, </span>
<span id="cb4-7"><a href="#cb4-7"></a>    lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">Sys.Date</span>())</span>
<span id="cb4-8"><a href="#cb4-8"></a>    ),</span>
<span id="cb4-9"><a href="#cb4-9"></a>  <span class="at">be_quiet       =</span> <span class="cn">TRUE</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 884 × 10
   indicator date       reference…¹  mean median    sd   min   max n_res…² basis
   &lt;chr&gt;     &lt;date&gt;     &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt; &lt;int&gt;
 1 PIB Total 2023-03-03 1/2023       1.72   1.64 1.03   -0.4  4.69      30     1
 2 PIB Total 2023-03-03 1/2023       1.76   1.69 0.785  -0.4  4.69      84     0
 3 PIB Total 2023-03-02 1/2023       1.82   1.86 1.11   -0.4  4.69      27     1
 4 PIB Total 2023-03-02 1/2023       1.73   1.64 0.800  -0.4  4.69      84     0
 5 PIB Total 2023-03-01 1/2023       1.76   1.86 0.994  -0.4  3.8       25     1
 6 PIB Total 2023-03-01 1/2023       1.71   1.6  0.769  -0.4  3.8       85     0
 7 PIB Total 2023-02-28 1/2023       1.67   1.7  0.911  -0.4  3.8       37     1
 8 PIB Total 2023-02-28 1/2023       1.71   1.6  0.769  -0.4  3.8       85     0
 9 PIB Total 2023-02-27 1/2023       1.72   1.68 0.834  -0.4  3.8       65     1
10 PIB Total 2023-02-27 1/2023       1.71   1.6  0.769  -0.4  3.8       85     0
# … with 874 more rows, and abbreviated variable names ¹​reference_date,
#   ²​n_respondents</code></pre>
</div>
</div>
</section><section id="get_annual" class="level3"><h3 class="anchored" data-anchor-id="get_annual">get_annual()</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Annual market expectations for SELIC and exchange rate (BRL) indicator</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>meedr<span class="sc">::</span><span class="fu">get_annual</span>(</span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="at">indicator      =</span> <span class="fu">c</span>(<span class="st">"Selic"</span>, <span class="st">"Câmbio"</span>),</span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="at">reference_date =</span> <span class="fu">format</span>(<span class="fu">Sys.Date</span>(), <span class="st">"%Y"</span>),</span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="at">be_quiet       =</span> <span class="cn">TRUE</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,970 × 11
   indicator detail date       referenc…¹  mean median    sd   min   max n_res…²
   &lt;chr&gt;     &lt;lgl&gt;  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt;
 1 Selic     NA     2023-03-03 2023       12.9   12.8  0.739 10.8   13.8     136
 2 Selic     NA     2023-03-03 2023       12.9   12.8  0.710 11     13.8      44
 3 Câmbio    NA     2023-03-03 2023        5.23   5.25 0.166  4.7    5.8     115
 4 Câmbio    NA     2023-03-03 2023        5.20   5.2  0.171  4.8    5.6      38
 5 Selic     NA     2023-03-02 2023       12.9   12.8  0.743 10.8   13.8     136
 6 Selic     NA     2023-03-02 2023       12.9   12.8  0.668 11.2   13.8      45
 7 Câmbio    NA     2023-03-02 2023        5.24   5.25 0.168  4.7    5.8     115
 8 Câmbio    NA     2023-03-02 2023        5.24   5.26 0.170  4.85   5.6      40
 9 Selic     NA     2023-03-01 2023       12.9   12.8  0.747 10.8   13.8     134
10 Selic     NA     2023-03-01 2023       12.8   12.8  0.738 11     13.8      47
# … with 1,960 more rows, 1 more variable: basis &lt;int&gt;, and abbreviated
#   variable names ¹​reference_date, ²​n_respondents</code></pre>
</div>
</div>
</section><section id="get_inflation_12m" class="level3"><h3 class="anchored" data-anchor-id="get_inflation_12m">get_inflation_12m()</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Inflation over the next 12 months</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co"># First, and a suggestion, run this for using parallel computing:</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>future<span class="sc">::</span><span class="fu">plan</span>(future<span class="sc">::</span>multisession, <span class="at">workers =</span> <span class="fu">floor</span>(future<span class="sc">::</span><span class="fu">availableCores</span>()<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb8-4"><a href="#cb8-4"></a>meedr<span class="sc">::</span><span class="fu">get_inflation_12m</span>(</span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="at">indicator   =</span> <span class="fu">c</span>(</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="st">"IGP-DI"</span>, <span class="st">"IGP-M"</span>, <span class="st">"INPC"</span>, <span class="st">"IPA-DI"</span>, <span class="st">"IPA-M"</span>, <span class="st">"IPCA"</span>, <span class="st">"IPCA-15"</span>, <span class="st">"IPC-Fipe"</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>    ),</span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="at">smoothed    =</span> <span class="st">"yes"</span>,</span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="at">be_quiet    =</span> <span class="cn">FALSE</span>, <span class="co"># display messages</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="at">do_parallel =</span> <span class="cn">TRUE</span> <span class="co"># turn on parallel computing</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>
Running parallel with 2 cores (4 available)

Fetching [IGP-DI, IGP-M, INPC, IPA-DI, IPA-M, IPCA, IPCA-15, IPC-Fipe] data from BCB-Olinda... </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Found 1985 observations!</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,985 × 10
   indicator date       smoothed  mean median    sd   min   max n_respon…¹ basis
   &lt;chr&gt;     &lt;date&gt;     &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;int&gt; &lt;int&gt;
 1 IGP-M     2023-03-03 yes       4.71   4.79 0.937  2.59  7.33         59     0
 2 IGP-M     2023-03-03 yes       4.85   4.84 1.13   2.59  7.33         18     1
 3 IPCA      2023-03-03 yes       5.56   5.60 0.452  3.80  6.62        117     0
 4 IPCA      2023-03-03 yes       5.56   5.64 0.512  3.94  6.62         42     1
 5 IGP-M     2023-03-02 yes       4.74   4.79 0.963  2.58  8.28         61     0
 6 IGP-M     2023-03-02 yes       4.74   4.61 1.28   2.58  8.28         15     1
 7 IPCA      2023-03-02 yes       5.56   5.58 0.452  3.81  6.61        116     0
 8 IPCA      2023-03-02 yes       5.53   5.44 0.497  3.95  6.61         33     1
 9 IGP-M     2023-03-01 yes       4.76   4.81 0.934  2.94  8.27         60     0
10 IGP-M     2023-03-01 yes       4.92   4.85 1.23   3.35  8.27         13     1
# … with 1,975 more rows, and abbreviated variable name ¹​n_respondents</code></pre>
</div>
</div>
</section><section id="get_monthly_top5" class="level3"><h3 class="anchored" data-anchor-id="get_monthly_top5">get_monthly_top5()</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Monthly market expectations for IGP-M indicator (Top 5 Focus)</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>meedr<span class="sc">::</span><span class="fu">get_monthly_top5</span>(</span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="at">indicator  =</span> <span class="st">"IGP-M"</span>,</span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="at">first_date =</span> <span class="cn">NULL</span>, <span class="co"># get all data to current date</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="at">calc_type  =</span> <span class="st">"long"</span>,</span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="at">be_quiet   =</span> <span class="cn">TRUE</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 77,024 × 9
   indicator date       reference_date calc_type  mean median     sd   min   max
   &lt;chr&gt;     &lt;date&gt;     &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 IGP-M     2022-02-18 02/2022        L         1.70    1.8  0.306   1.1   1.95
 2 IGP-M     2022-02-18 03/2022        L         0.798   0.75 0.133   0.64  1   
 3 IGP-M     2022-02-18 04/2022        L         0.592   0.45 0.244   0.35  1   
 4 IGP-M     2022-02-18 05/2022        L         0.448   0.33 0.271   0.2   0.9 
 5 IGP-M     2022-02-18 06/2022        L         0.574   0.5  0.133   0.41  0.76
 6 IGP-M     2022-02-18 07/2022        L         0.46    0.43 0.0953  0.35  0.6 
 7 IGP-M     2022-02-18 08/2022        L         0.476   0.5  0.0931  0.36  0.62
 8 IGP-M     2022-02-18 09/2022        L         0.536   0.5  0.104   0.4   0.7 
 9 IGP-M     2022-02-18 10/2022        L         0.534   0.5  0.065   0.45  0.62
10 IGP-M     2022-02-18 11/2022        L         0.574   0.6  0.114   0.44  0.76
# … with 77,014 more rows</code></pre>
</div>
</div>
</section><section id="get_annual_top5" class="level3"><h3 class="anchored" data-anchor-id="get_annual_top5">get_annual_top5()</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Annual market expectations for SELIC indicator (Top 5 Focus)</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>meedr<span class="sc">::</span><span class="fu">get_annual_top5</span>(</span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="at">indicator   =</span> <span class="st">"Selic"</span>,</span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="at">be_quiet    =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="at">use_memoise =</span> <span class="cn">FALSE</span> <span class="co"># disable caching system</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,134 × 9
   indicator date       reference_date calc_type  mean median    sd   min   max
   &lt;chr&gt;     &lt;date&gt;     &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Selic     2023-03-03 2023           S         12.8   12.8  0.857 10.8   13.8
 2 Selic     2023-03-03 2024           S         10.2   10    1.10   8.25  13.8
 3 Selic     2023-03-03 2025           S          8.81   9    0.968  6     11  
 4 Selic     2023-03-03 2026           S          8.60   8.5  1.08   5     11  
 5 Selic     2023-03-03 2027           S          8.54   8.5  1.15   5     11  
 6 Selic     2023-03-03 2023           L         12.6   12.5  0.663 11.8   13.8
 7 Selic     2023-03-03 2024           L          9.9   10    0.860  8.5   11  
 8 Selic     2023-03-03 2025           L          9.55   9.5  0.678  8.5   10.5
 9 Selic     2023-03-03 2026           L          9.4    9.5  0.8    8.5   10.5
10 Selic     2023-03-03 2027           L          9.62   9.75 0.740  8.5   10.5
# … with 6,124 more rows</code></pre>
</div>
</div>
</section></section><section id="data-visualization" class="level2"><h2 class="anchored" data-anchor-id="data-visualization">Data visualization</h2>
<p>Now we will create a cool chart about inflation expectations in Brazil. First, we will import the data from the Central Bank API using <a href="https://fortietwo.com/meedr/">meedr</a>:</p>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># Get market expectations for inflation over the next 12 months</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>inflation <span class="ot">&lt;-</span> meedr<span class="sc">::</span><span class="fu">get_inflation_12m</span>(</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="at">indicator   =</span> <span class="st">"IPCA"</span>,</span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="at">first_date  =</span> <span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="fu">months</span>(<span class="dv">5</span> <span class="sc">*</span> <span class="dv">12</span>),</span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="at">smoothed    =</span> <span class="st">"yes"</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, we use <a href="https://ggplot2.tidyverse.org">ggplot2</a> to generate a customized line chart. We plot the median of expectations and one standard deviation to observe some data distribution.</p>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Plot</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>inflation <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(basis <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="#cb17-4"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> date) <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_ribbon</span>(</span>
<span id="cb17-7"><a href="#cb17-7"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">ymin =</span> median <span class="sc">-</span> sd, <span class="at">ymax =</span> median <span class="sc">+</span> sd),</span>
<span id="cb17-8"><a href="#cb17-8"></a>    <span class="at">alpha   =</span> <span class="fl">0.2</span>, </span>
<span id="cb17-9"><a href="#cb17-9"></a>    <span class="at">fill    =</span> <span class="st">"#282f6b"</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>    ) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(</span>
<span id="cb17-12"><a href="#cb17-12"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> median <span class="sc">-</span> sd), </span>
<span id="cb17-13"><a href="#cb17-13"></a>    <span class="at">size    =</span> <span class="fl">0.5</span>, </span>
<span id="cb17-14"><a href="#cb17-14"></a>    <span class="at">color   =</span> <span class="st">"#282f6b"</span></span>
<span id="cb17-15"><a href="#cb17-15"></a>      ) <span class="sc">+</span></span>
<span id="cb17-16"><a href="#cb17-16"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(</span>
<span id="cb17-17"><a href="#cb17-17"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> median <span class="sc">+</span> sd), </span>
<span id="cb17-18"><a href="#cb17-18"></a>    <span class="at">size    =</span> <span class="fl">0.5</span>, </span>
<span id="cb17-19"><a href="#cb17-19"></a>    <span class="at">color   =</span> <span class="st">"#282f6b"</span></span>
<span id="cb17-20"><a href="#cb17-20"></a>      ) <span class="sc">+</span></span>
<span id="cb17-21"><a href="#cb17-21"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(</span>
<span id="cb17-22"><a href="#cb17-22"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> median, <span class="at">colour =</span> <span class="st">"IPCA"</span>),</span>
<span id="cb17-23"><a href="#cb17-23"></a>    <span class="at">size    =</span> <span class="dv">1</span>, </span>
<span id="cb17-24"><a href="#cb17-24"></a>    <span class="at">color   =</span> <span class="st">"#b22200"</span></span>
<span id="cb17-25"><a href="#cb17-25"></a>    ) <span class="sc">+</span></span>
<span id="cb17-26"><a href="#cb17-26"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"9 months"</span>, <span class="at">date_labels =</span> <span class="st">"%m/%Y"</span>) <span class="sc">+</span></span>
<span id="cb17-27"><a href="#cb17-27"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb17-28"><a href="#cb17-28"></a>    <span class="at">title    =</span> <span class="st">"Brazil: Market expectations for inflation over the next 12 months"</span>,</span>
<span id="cb17-29"><a href="#cb17-29"></a>    <span class="at">subtitle =</span> <span class="st">"Smoothed median and standard deviation, IPCA"</span>,</span>
<span id="cb17-30"><a href="#cb17-30"></a>    <span class="at">x        =</span> <span class="cn">NULL</span>,</span>
<span id="cb17-31"><a href="#cb17-31"></a>    <span class="at">y        =</span> <span class="st">"%"</span>,</span>
<span id="cb17-32"><a href="#cb17-32"></a>    <span class="at">caption  =</span> <span class="st">"**Data**: BCB | **Chart**: Fernando da Silva"</span></span>
<span id="cb17-33"><a href="#cb17-33"></a>    ) <span class="sc">+</span></span>
<span id="cb17-34"><a href="#cb17-34"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>(<span class="at">base_size =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb17-35"><a href="#cb17-35"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb17-36"><a href="#cb17-36"></a>    <span class="at">plot.title   =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-37"><a href="#cb17-37"></a>    <span class="at">plot.caption =</span> ggtext<span class="sc">::</span><span class="fu">element_textbox_simple</span>(</span>
<span id="cb17-38"><a href="#cb17-38"></a>      <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb17-39"><a href="#cb17-39"></a>      ),</span>
<span id="cb17-40"><a href="#cb17-40"></a>    <span class="at">plot.title.position   =</span> <span class="st">"plot"</span>,</span>
<span id="cb17-41"><a href="#cb17-41"></a>    <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb17-42"><a href="#cb17-42"></a>    <span class="at">axis.text             =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-43"><a href="#cb17-43"></a>    <span class="at">axis.title            =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb17-44"><a href="#cb17-44"></a>    <span class="at">legend.text           =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb17-45"><a href="#cb17-45"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="2550"></p>
</div>
</div>
<p>And that’s it!</p>
<p>The process of developing a package is a lot of learning and enrichment. Soon I intend to increase the package with new utilities. In the meantime, feel free to use and test the package, I will be happy to receive any feedback!</p>
</section><section id="github-repo-and-documentation" class="level2"><h2 class="anchored" data-anchor-id="github-repo-and-documentation">GitHub repo and documentation</h2>
<p>Check the source code and other information in the package repository on <a href="https://github.com/schoulten/meedr">GitHub</a>.</p>
<p>Check the package documentation on <a href="https://fortietwo.com/meedr/">this page</a>.</p>
<details><summary>
Informações da sessão
</summary><div style="font-size:14px;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.2.1 (2022-06-23 ucrt)
 os       Windows 10 x64 (build 19045)
 system   x86_64, mingw32
 ui       RTerm
 language (EN)
 collate  Portuguese_Brazil.utf8
 ctype    Portuguese_Brazil.utf8
 tz       America/Sao_Paulo
 date     2023-03-10
 pandoc   2.19.2 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)
 quarto   1.2.335 @ C:\\PROGRA~1\\Quarto\\bin\\quarto.exe

─ Packages ───────────────────────────────────────────────────────────────────
 package     * version    date (UTC) lib source
 assertthat    0.2.1      2019-03-21 [1] CRAN (R 4.2.1)
 cachem        1.0.6      2021-08-19 [1] CRAN (R 4.2.1)
 cli           3.4.1      2022-09-23 [1] CRAN (R 4.2.1)
 codetools     0.2-18     2020-11-04 [2] CRAN (R 4.2.1)
 colorspace    2.0-3      2022-02-21 [1] CRAN (R 4.2.1)
 curl          4.3.3      2022-10-06 [1] CRAN (R 4.2.1)
 DBI           1.1.3      2022-06-18 [1] CRAN (R 4.2.1)
 digest        0.6.29     2021-12-01 [1] CRAN (R 4.2.1)
 dplyr         1.0.10     2022-09-01 [1] CRAN (R 4.2.1)
 evaluate      0.17       2022-10-07 [1] CRAN (R 4.2.1)
 fansi         1.0.3      2022-03-24 [1] CRAN (R 4.2.1)
 farver        2.1.1      2022-07-06 [1] CRAN (R 4.2.1)
 fastmap       1.1.0      2021-01-25 [1] CRAN (R 4.2.1)
 furrr         0.3.1      2022-08-15 [1] CRAN (R 4.2.1)
 future        1.28.0     2022-09-02 [1] CRAN (R 4.2.1)
 generics      0.1.3      2022-07-05 [1] CRAN (R 4.2.1)
 ggplot2       3.3.6      2022-05-03 [1] CRAN (R 4.2.1)
 ggtext        0.1.2      2022-09-16 [1] CRAN (R 4.2.1)
 globals       0.16.1     2022-08-28 [1] CRAN (R 4.2.1)
 glue          1.6.2      2022-02-24 [1] CRAN (R 4.2.1)
 gridtext      0.1.4.9000 2022-06-07 [1] Github (wilkelab/gridtext@6192174)
 gtable        0.3.1      2022-09-01 [1] CRAN (R 4.2.1)
 htmltools     0.5.3      2022-07-18 [1] CRAN (R 4.2.1)
 htmlwidgets   1.5.4      2021-09-08 [1] CRAN (R 4.2.1)
 httr          1.4.5      2023-02-24 [1] CRAN (R 4.2.2)
 jsonlite      1.8.4      2022-12-06 [1] CRAN (R 4.2.2)
 knitr         1.40       2022-08-24 [1] CRAN (R 4.2.1)
 labeling      0.4.2      2020-10-20 [1] CRAN (R 4.2.0)
 lifecycle     1.0.3      2022-10-07 [1] CRAN (R 4.2.1)
 listenv       0.8.0      2019-12-05 [1] CRAN (R 4.2.1)
 lubridate     1.9.2      2023-02-10 [1] CRAN (R 4.2.2)
 magrittr      2.0.3      2022-03-30 [1] CRAN (R 4.2.1)
 markdown      1.1        2019-08-07 [1] CRAN (R 4.2.1)
 meedr       * 0.0.3      2022-08-12 [1] Github (schoulten/meedr@66f13cd)
 memoise       2.0.1      2021-11-26 [1] CRAN (R 4.2.1)
 munsell       0.5.0      2018-06-12 [1] CRAN (R 4.2.1)
 parallelly    1.32.1     2022-07-21 [1] CRAN (R 4.2.1)
 pillar        1.8.1      2022-08-19 [1] CRAN (R 4.2.1)
 pkgconfig     2.0.3      2019-09-22 [1] CRAN (R 4.2.1)
 purrr         0.3.5      2022-10-06 [1] CRAN (R 4.2.1)
 R6            2.5.1      2021-08-19 [1] CRAN (R 4.2.1)
 Rcpp          1.0.9      2022-07-08 [1] CRAN (R 4.2.1)
 rlang         1.0.6      2022-09-24 [1] CRAN (R 4.2.1)
 rmarkdown     2.17       2022-10-07 [1] CRAN (R 4.2.1)
 rstudioapi    0.14       2022-08-22 [1] CRAN (R 4.2.1)
 scales        1.2.1      2022-08-20 [1] CRAN (R 4.2.1)
 sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.2.1)
 stringi       1.7.8      2022-07-11 [1] CRAN (R 4.2.1)
 stringr       1.5.0      2022-12-02 [1] CRAN (R 4.2.2)
 tibble        3.1.8      2022-07-22 [1] CRAN (R 4.2.1)
 tidyselect    1.2.0      2022-10-10 [1] CRAN (R 4.2.1)
 timechange    0.2.0      2023-01-11 [1] CRAN (R 4.2.2)
 utf8          1.2.2      2021-07-24 [1] CRAN (R 4.2.1)
 vctrs         0.5.1      2022-11-16 [1] CRAN (R 4.2.1)
 withr         2.5.0      2022-03-03 [1] CRAN (R 4.2.1)
 xfun          0.33       2022-09-12 [1] CRAN (R 4.2.1)
 xml2          1.3.3      2021-11-30 [1] CRAN (R 4.2.1)
 yaml          2.3.5      2022-02-21 [1] CRAN (R 4.2.1)

 [1] C:/Users/ferna/AppData/Local/R/win-library/4.2
 [2] C:/Program Files/R/R-4.2.1/library

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>
</div>
</details><div style="border-top: 1px solid #dee2e6; padding-top: 1rem;">
<!-- AddToAny BEGIN -->
<strong>Compartilhar:</strong>
<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
<p><a class="a2a_button_email"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_mastodon"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_whatsapp"></a></p>
</div>
<script async="" src="https://static.addtoany.com/menu/page.js"></script><!-- AddToAny END -->
</div>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/(www\.)?fortietwo\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb19" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">---</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="an">title:</span><span class="co"> "meedr: MacroEconomic Expectations Data in R"</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="an">date:</span><span class="co"> "2021-03-13"</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="an">date-modified:</span><span class="co"> "2023-03-10"</span></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="an">author:</span><span class="co"> "Fernando da Silva"</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="an">description:</span><span class="co"> "Quick and easy access to market expectations data of the Focus report from Central Bank of Brazil"</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="an">categories:</span><span class="co"> [R, Macroeconomics, Data, API, English]</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="an">image:</span><span class="co"> "imgs/logo.png"</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="an">aliases:</span><span class="co"> </span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co">  - /posts/r/meedr/index.html</span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="co">---</span></span>
<span id="cb19-12"><a href="#cb19-12"></a></span>
<span id="cb19-13"><a href="#cb19-13"></a>Very happy to announce that <span class="in">`{meedr}`</span>, my first package on R, is on its way to CRAN!</span>
<span id="cb19-14"><a href="#cb19-14"></a></span>
<span id="cb19-15"><a href="#cb19-15"></a>**Note**: This package was definitively archived by CRAN on July 22, 2021 and is only available on GitHub. Despite this, maintenance and bug fixes will continue to be done.</span>
<span id="cb19-16"><a href="#cb19-16"></a></span>
<span id="cb19-17"><a href="#cb19-17"></a>::: {.grid}</span>
<span id="cb19-18"><a href="#cb19-18"></a></span>
<span id="cb19-19"><a href="#cb19-19"></a>::: {.g-col-10}</span>
<span id="cb19-20"><a href="#cb19-20"></a>The goal of <span class="in">`{meedr}`</span> is to provide quick and easy access to market expectations data for the main macroeconomic indicators in the Focus report, made available by the **Central Bank of Brazil** through the <span class="co">[</span><span class="ot">Expectations System data API</span><span class="co">](https://olinda.bcb.gov.br/olinda/servico/Expectativas/versao/v1/aplicacao#!/recursos)</span>. This data comes from several financial institutions such as banks, brokers, funds, consultancies, etc.</span>
<span id="cb19-21"><a href="#cb19-21"></a>:::</span>
<span id="cb19-22"><a href="#cb19-22"></a></span>
<span id="cb19-23"><a href="#cb19-23"></a>::: {.g-col-2}</span>
<span id="cb19-24"><a href="#cb19-24"></a><span class="kw">&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">"imgs/logo.png"</span> <span class="er">align</span><span class="ot">=</span><span class="st">"right"</span> <span class="er">height</span><span class="ot">=</span><span class="st">"139"</span> <span class="kw">/&gt;</span></span>
<span id="cb19-25"><a href="#cb19-25"></a>:::</span>
<span id="cb19-26"><a href="#cb19-26"></a></span>
<span id="cb19-27"><a href="#cb19-27"></a>:::</span>
<span id="cb19-28"><a href="#cb19-28"></a></span>
<span id="cb19-29"><a href="#cb19-29"></a>The <span class="in">`{meedr}`</span> package offers an R interface to the API and other advantages:</span>
<span id="cb19-30"><a href="#cb19-30"></a></span>
<span id="cb19-31"><a href="#cb19-31"></a><span class="ss">- </span>Use of a caching system with package <span class="in">`{memoise}`</span> to speed up repeated requests for data;</span>
<span id="cb19-32"><a href="#cb19-32"></a><span class="ss">- </span>Users can utilize all cores of the machine (parallel computing) when fetching a large batch of time series.</span>
<span id="cb19-33"><a href="#cb19-33"></a></span>
<span id="cb19-34"><a href="#cb19-34"></a><span class="fu">## Installation</span></span>
<span id="cb19-35"><a href="#cb19-35"></a></span>
<span id="cb19-36"><a href="#cb19-36"></a>You can install the development version from GitHub with:</span>
<span id="cb19-37"><a href="#cb19-37"></a></span>
<span id="cb19-38"><a href="#cb19-38"></a><span class="in">```r</span></span>
<span id="cb19-39"><a href="#cb19-39"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb19-40"><a href="#cb19-40"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"schoulten/meedr"</span>)</span>
<span id="cb19-41"><a href="#cb19-41"></a><span class="in">```</span></span>
<span id="cb19-42"><a href="#cb19-42"></a></span>
<span id="cb19-43"><a href="#cb19-43"></a><span class="fu">## Features</span></span>
<span id="cb19-44"><a href="#cb19-44"></a></span>
<span id="cb19-45"><a href="#cb19-45"></a><span class="ss">- </span>To retrieve data from the API, there are several useful functions that connect to the endpoints:</span>
<span id="cb19-46"><a href="#cb19-46"></a><span class="ss">  - </span>Monthly market expectations with <span class="co">[</span><span class="ot">get_monthly()</span><span class="co">](#get_monthly)</span></span>
<span id="cb19-47"><a href="#cb19-47"></a><span class="ss">  - </span>Quarterly market expectations with <span class="co">[</span><span class="ot">get_quarterly()</span><span class="co">](#get_quarterly)</span></span>
<span id="cb19-48"><a href="#cb19-48"></a><span class="ss">  - </span>Annual market expectations with <span class="co">[</span><span class="ot">get_annual()</span><span class="co">](#get_annual)</span></span>
<span id="cb19-49"><a href="#cb19-49"></a><span class="ss">  - </span>Market expectations for inflation over the next 12 months with <span class="co">[</span><span class="ot">get_inflation_12m()</span><span class="co">](#get_inflation_12m)</span></span>
<span id="cb19-50"><a href="#cb19-50"></a><span class="ss">  - </span>Monthly market expectations for the Top 5 indicators with <span class="co">[</span><span class="ot">get_monthly_top5()</span><span class="co">](#get_monthly_top5)</span></span>
<span id="cb19-51"><a href="#cb19-51"></a><span class="ss">  - </span>Annual market expectations for the Top 5 indicators with <span class="co">[</span><span class="ot">get_annual_top5()</span><span class="co">](#get_annual_top5)</span></span>
<span id="cb19-52"><a href="#cb19-52"></a></span>
<span id="cb19-53"><a href="#cb19-53"></a><span class="fu">## Example</span></span>
<span id="cb19-54"><a href="#cb19-54"></a></span>
<span id="cb19-55"><a href="#cb19-55"></a>These are some basic examples of using the package:</span>
<span id="cb19-56"><a href="#cb19-56"></a></span>
<span id="cb19-57"><a href="#cb19-57"></a><span class="fu">### get_monthly()</span></span>
<span id="cb19-58"><a href="#cb19-58"></a></span>
<span id="cb19-61"><a href="#cb19-61"></a><span class="in">```{r}</span></span>
<span id="cb19-62"><a href="#cb19-62"></a><span class="fu">library</span>(meedr)</span>
<span id="cb19-63"><a href="#cb19-63"></a></span>
<span id="cb19-64"><a href="#cb19-64"></a><span class="co"># Monthly market expectations for IPCA indicator</span></span>
<span id="cb19-65"><a href="#cb19-65"></a>meedr<span class="sc">::</span><span class="fu">get_monthly</span>(</span>
<span id="cb19-66"><a href="#cb19-66"></a>  <span class="at">indicator      =</span> <span class="st">"IPCA"</span>,</span>
<span id="cb19-67"><a href="#cb19-67"></a>  <span class="at">first_date     =</span> <span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="dv">30</span>,</span>
<span id="cb19-68"><a href="#cb19-68"></a>  <span class="at">reference_date =</span> <span class="fu">format</span>(<span class="fu">Sys.Date</span>(), <span class="st">"%m/%Y"</span>),</span>
<span id="cb19-69"><a href="#cb19-69"></a>  <span class="at">be_quiet       =</span> <span class="cn">TRUE</span></span>
<span id="cb19-70"><a href="#cb19-70"></a>  )</span>
<span id="cb19-71"><a href="#cb19-71"></a><span class="in">```</span></span>
<span id="cb19-72"><a href="#cb19-72"></a></span>
<span id="cb19-73"><a href="#cb19-73"></a><span class="fu">### get_quarterly()</span></span>
<span id="cb19-74"><a href="#cb19-74"></a></span>
<span id="cb19-77"><a href="#cb19-77"></a><span class="in">```{r}</span></span>
<span id="cb19-78"><a href="#cb19-78"></a><span class="co"># Quarterly market expectations for GDP indicator</span></span>
<span id="cb19-79"><a href="#cb19-79"></a>meedr<span class="sc">::</span><span class="fu">get_quarterly</span>(</span>
<span id="cb19-80"><a href="#cb19-80"></a>  <span class="at">indicator      =</span> <span class="st">"PIB Total"</span>,</span>
<span id="cb19-81"><a href="#cb19-81"></a>  <span class="at">first_date     =</span> <span class="st">"2021-01-01"</span>,</span>
<span id="cb19-82"><a href="#cb19-82"></a>  <span class="at">reference_date =</span> <span class="fu">paste0</span>(</span>
<span id="cb19-83"><a href="#cb19-83"></a>    lubridate<span class="sc">::</span><span class="fu">quarter</span>(<span class="fu">Sys.Date</span>()), <span class="st">"/"</span>, </span>
<span id="cb19-84"><a href="#cb19-84"></a>    lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">Sys.Date</span>())</span>
<span id="cb19-85"><a href="#cb19-85"></a>    ),</span>
<span id="cb19-86"><a href="#cb19-86"></a>  <span class="at">be_quiet       =</span> <span class="cn">TRUE</span></span>
<span id="cb19-87"><a href="#cb19-87"></a>  )</span>
<span id="cb19-88"><a href="#cb19-88"></a><span class="in">```</span></span>
<span id="cb19-89"><a href="#cb19-89"></a></span>
<span id="cb19-90"><a href="#cb19-90"></a><span class="fu">### get_annual()</span></span>
<span id="cb19-91"><a href="#cb19-91"></a></span>
<span id="cb19-94"><a href="#cb19-94"></a><span class="in">```{r}</span></span>
<span id="cb19-95"><a href="#cb19-95"></a><span class="co"># Annual market expectations for SELIC and exchange rate (BRL) indicator</span></span>
<span id="cb19-96"><a href="#cb19-96"></a>meedr<span class="sc">::</span><span class="fu">get_annual</span>(</span>
<span id="cb19-97"><a href="#cb19-97"></a>  <span class="at">indicator      =</span> <span class="fu">c</span>(<span class="st">"Selic"</span>, <span class="st">"Câmbio"</span>),</span>
<span id="cb19-98"><a href="#cb19-98"></a>  <span class="at">reference_date =</span> <span class="fu">format</span>(<span class="fu">Sys.Date</span>(), <span class="st">"%Y"</span>),</span>
<span id="cb19-99"><a href="#cb19-99"></a>  <span class="at">be_quiet       =</span> <span class="cn">TRUE</span></span>
<span id="cb19-100"><a href="#cb19-100"></a>  )</span>
<span id="cb19-101"><a href="#cb19-101"></a><span class="in">```</span></span>
<span id="cb19-102"><a href="#cb19-102"></a></span>
<span id="cb19-103"><a href="#cb19-103"></a><span class="fu">### get_inflation_12m()</span></span>
<span id="cb19-104"><a href="#cb19-104"></a></span>
<span id="cb19-107"><a href="#cb19-107"></a><span class="in">```{r}</span></span>
<span id="cb19-108"><a href="#cb19-108"></a><span class="co">#| message: true</span></span>
<span id="cb19-109"><a href="#cb19-109"></a><span class="co">#| warning: true</span></span>
<span id="cb19-110"><a href="#cb19-110"></a><span class="co"># Inflation over the next 12 months</span></span>
<span id="cb19-111"><a href="#cb19-111"></a><span class="co"># First, and a suggestion, run this for using parallel computing:</span></span>
<span id="cb19-112"><a href="#cb19-112"></a>future<span class="sc">::</span><span class="fu">plan</span>(future<span class="sc">::</span>multisession, <span class="at">workers =</span> <span class="fu">floor</span>(future<span class="sc">::</span><span class="fu">availableCores</span>()<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb19-113"><a href="#cb19-113"></a>meedr<span class="sc">::</span><span class="fu">get_inflation_12m</span>(</span>
<span id="cb19-114"><a href="#cb19-114"></a>  <span class="at">indicator   =</span> <span class="fu">c</span>(</span>
<span id="cb19-115"><a href="#cb19-115"></a>    <span class="st">"IGP-DI"</span>, <span class="st">"IGP-M"</span>, <span class="st">"INPC"</span>, <span class="st">"IPA-DI"</span>, <span class="st">"IPA-M"</span>, <span class="st">"IPCA"</span>, <span class="st">"IPCA-15"</span>, <span class="st">"IPC-Fipe"</span></span>
<span id="cb19-116"><a href="#cb19-116"></a>    ),</span>
<span id="cb19-117"><a href="#cb19-117"></a>  <span class="at">smoothed    =</span> <span class="st">"yes"</span>,</span>
<span id="cb19-118"><a href="#cb19-118"></a>  <span class="at">be_quiet    =</span> <span class="cn">FALSE</span>, <span class="co"># display messages</span></span>
<span id="cb19-119"><a href="#cb19-119"></a>  <span class="at">do_parallel =</span> <span class="cn">TRUE</span> <span class="co"># turn on parallel computing</span></span>
<span id="cb19-120"><a href="#cb19-120"></a>  )</span>
<span id="cb19-121"><a href="#cb19-121"></a><span class="in">```</span></span>
<span id="cb19-122"><a href="#cb19-122"></a></span>
<span id="cb19-123"><a href="#cb19-123"></a><span class="fu">### get_monthly_top5()</span></span>
<span id="cb19-124"><a href="#cb19-124"></a></span>
<span id="cb19-127"><a href="#cb19-127"></a><span class="in">```{r}</span></span>
<span id="cb19-128"><a href="#cb19-128"></a><span class="co"># Monthly market expectations for IGP-M indicator (Top 5 Focus)</span></span>
<span id="cb19-129"><a href="#cb19-129"></a>meedr<span class="sc">::</span><span class="fu">get_monthly_top5</span>(</span>
<span id="cb19-130"><a href="#cb19-130"></a>  <span class="at">indicator  =</span> <span class="st">"IGP-M"</span>,</span>
<span id="cb19-131"><a href="#cb19-131"></a>  <span class="at">first_date =</span> <span class="cn">NULL</span>, <span class="co"># get all data to current date</span></span>
<span id="cb19-132"><a href="#cb19-132"></a>  <span class="at">calc_type  =</span> <span class="st">"long"</span>,</span>
<span id="cb19-133"><a href="#cb19-133"></a>  <span class="at">be_quiet   =</span> <span class="cn">TRUE</span></span>
<span id="cb19-134"><a href="#cb19-134"></a>  )</span>
<span id="cb19-135"><a href="#cb19-135"></a><span class="in">```</span></span>
<span id="cb19-136"><a href="#cb19-136"></a></span>
<span id="cb19-137"><a href="#cb19-137"></a><span class="fu">### get_annual_top5()</span></span>
<span id="cb19-138"><a href="#cb19-138"></a></span>
<span id="cb19-141"><a href="#cb19-141"></a><span class="in">```{r}</span></span>
<span id="cb19-142"><a href="#cb19-142"></a><span class="co"># Annual market expectations for SELIC indicator (Top 5 Focus)</span></span>
<span id="cb19-143"><a href="#cb19-143"></a>meedr<span class="sc">::</span><span class="fu">get_annual_top5</span>(</span>
<span id="cb19-144"><a href="#cb19-144"></a>  <span class="at">indicator   =</span> <span class="st">"Selic"</span>,</span>
<span id="cb19-145"><a href="#cb19-145"></a>  <span class="at">be_quiet    =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-146"><a href="#cb19-146"></a>  <span class="at">use_memoise =</span> <span class="cn">FALSE</span> <span class="co"># disable caching system</span></span>
<span id="cb19-147"><a href="#cb19-147"></a>  )</span>
<span id="cb19-148"><a href="#cb19-148"></a><span class="in">```</span></span>
<span id="cb19-149"><a href="#cb19-149"></a></span>
<span id="cb19-150"><a href="#cb19-150"></a><span class="fu">## Data visualization</span></span>
<span id="cb19-151"><a href="#cb19-151"></a></span>
<span id="cb19-152"><a href="#cb19-152"></a>Now we will create a cool chart about inflation expectations in Brazil. First, we will import the data from the Central Bank API using <span class="in">`{meedr}`</span>:</span>
<span id="cb19-153"><a href="#cb19-153"></a></span>
<span id="cb19-156"><a href="#cb19-156"></a><span class="in">```{r}</span></span>
<span id="cb19-157"><a href="#cb19-157"></a><span class="co"># Get market expectations for inflation over the next 12 months</span></span>
<span id="cb19-158"><a href="#cb19-158"></a>inflation <span class="ot">&lt;-</span> meedr<span class="sc">::</span><span class="fu">get_inflation_12m</span>(</span>
<span id="cb19-159"><a href="#cb19-159"></a>  <span class="at">indicator   =</span> <span class="st">"IPCA"</span>,</span>
<span id="cb19-160"><a href="#cb19-160"></a>  <span class="at">first_date  =</span> <span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="fu">months</span>(<span class="dv">5</span> <span class="sc">*</span> <span class="dv">12</span>),</span>
<span id="cb19-161"><a href="#cb19-161"></a>  <span class="at">smoothed    =</span> <span class="st">"yes"</span></span>
<span id="cb19-162"><a href="#cb19-162"></a>  )</span>
<span id="cb19-163"><a href="#cb19-163"></a><span class="in">```</span></span>
<span id="cb19-164"><a href="#cb19-164"></a></span>
<span id="cb19-165"><a href="#cb19-165"></a>Next, we use <span class="in">`{ggplot2}`</span> to generate a customized line chart. We plot the median of expectations and one standard deviation to observe some data distribution.</span>
<span id="cb19-166"><a href="#cb19-166"></a></span>
<span id="cb19-169"><a href="#cb19-169"></a><span class="in">```{r}</span></span>
<span id="cb19-170"><a href="#cb19-170"></a><span class="co">#| fig-width: 8.5</span></span>
<span id="cb19-171"><a href="#cb19-171"></a><span class="co"># Plot</span></span>
<span id="cb19-172"><a href="#cb19-172"></a>inflation <span class="sc">|&gt;</span> </span>
<span id="cb19-173"><a href="#cb19-173"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(basis <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb19-174"><a href="#cb19-174"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb19-175"><a href="#cb19-175"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> date) <span class="sc">+</span></span>
<span id="cb19-176"><a href="#cb19-176"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_ribbon</span>(</span>
<span id="cb19-177"><a href="#cb19-177"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">ymin =</span> median <span class="sc">-</span> sd, <span class="at">ymax =</span> median <span class="sc">+</span> sd),</span>
<span id="cb19-178"><a href="#cb19-178"></a>    <span class="at">alpha   =</span> <span class="fl">0.2</span>, </span>
<span id="cb19-179"><a href="#cb19-179"></a>    <span class="at">fill    =</span> <span class="st">"#282f6b"</span></span>
<span id="cb19-180"><a href="#cb19-180"></a>    ) <span class="sc">+</span></span>
<span id="cb19-181"><a href="#cb19-181"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(</span>
<span id="cb19-182"><a href="#cb19-182"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> median <span class="sc">-</span> sd), </span>
<span id="cb19-183"><a href="#cb19-183"></a>    <span class="at">size    =</span> <span class="fl">0.5</span>, </span>
<span id="cb19-184"><a href="#cb19-184"></a>    <span class="at">color   =</span> <span class="st">"#282f6b"</span></span>
<span id="cb19-185"><a href="#cb19-185"></a>      ) <span class="sc">+</span></span>
<span id="cb19-186"><a href="#cb19-186"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(</span>
<span id="cb19-187"><a href="#cb19-187"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> median <span class="sc">+</span> sd), </span>
<span id="cb19-188"><a href="#cb19-188"></a>    <span class="at">size    =</span> <span class="fl">0.5</span>, </span>
<span id="cb19-189"><a href="#cb19-189"></a>    <span class="at">color   =</span> <span class="st">"#282f6b"</span></span>
<span id="cb19-190"><a href="#cb19-190"></a>      ) <span class="sc">+</span></span>
<span id="cb19-191"><a href="#cb19-191"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(</span>
<span id="cb19-192"><a href="#cb19-192"></a>    <span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> median, <span class="at">colour =</span> <span class="st">"IPCA"</span>),</span>
<span id="cb19-193"><a href="#cb19-193"></a>    <span class="at">size    =</span> <span class="dv">1</span>, </span>
<span id="cb19-194"><a href="#cb19-194"></a>    <span class="at">color   =</span> <span class="st">"#b22200"</span></span>
<span id="cb19-195"><a href="#cb19-195"></a>    ) <span class="sc">+</span></span>
<span id="cb19-196"><a href="#cb19-196"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"9 months"</span>, <span class="at">date_labels =</span> <span class="st">"%m/%Y"</span>) <span class="sc">+</span></span>
<span id="cb19-197"><a href="#cb19-197"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(</span>
<span id="cb19-198"><a href="#cb19-198"></a>    <span class="at">title    =</span> <span class="st">"Brazil: Market expectations for inflation over the next 12 months"</span>,</span>
<span id="cb19-199"><a href="#cb19-199"></a>    <span class="at">subtitle =</span> <span class="st">"Smoothed median and standard deviation, IPCA"</span>,</span>
<span id="cb19-200"><a href="#cb19-200"></a>    <span class="at">x        =</span> <span class="cn">NULL</span>,</span>
<span id="cb19-201"><a href="#cb19-201"></a>    <span class="at">y        =</span> <span class="st">"%"</span>,</span>
<span id="cb19-202"><a href="#cb19-202"></a>    <span class="at">caption  =</span> <span class="st">"**Data**: BCB | **Chart**: Fernando da Silva"</span></span>
<span id="cb19-203"><a href="#cb19-203"></a>    ) <span class="sc">+</span></span>
<span id="cb19-204"><a href="#cb19-204"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_light</span>(<span class="at">base_size =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb19-205"><a href="#cb19-205"></a>  ggplot2<span class="sc">::</span><span class="fu">theme</span>(</span>
<span id="cb19-206"><a href="#cb19-206"></a>    <span class="at">plot.title   =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-207"><a href="#cb19-207"></a>    <span class="at">plot.caption =</span> ggtext<span class="sc">::</span><span class="fu">element_textbox_simple</span>(</span>
<span id="cb19-208"><a href="#cb19-208"></a>      <span class="at">margin =</span> ggplot2<span class="sc">::</span><span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb19-209"><a href="#cb19-209"></a>      ),</span>
<span id="cb19-210"><a href="#cb19-210"></a>    <span class="at">plot.title.position   =</span> <span class="st">"plot"</span>,</span>
<span id="cb19-211"><a href="#cb19-211"></a>    <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb19-212"><a href="#cb19-212"></a>    <span class="at">axis.text             =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-213"><a href="#cb19-213"></a>    <span class="at">axis.title            =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb19-214"><a href="#cb19-214"></a>    <span class="at">legend.text           =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb19-215"><a href="#cb19-215"></a>    )</span>
<span id="cb19-216"><a href="#cb19-216"></a><span class="in">```</span></span>
<span id="cb19-217"><a href="#cb19-217"></a></span>
<span id="cb19-218"><a href="#cb19-218"></a>And that's it!</span>
<span id="cb19-219"><a href="#cb19-219"></a></span>
<span id="cb19-220"><a href="#cb19-220"></a>The process of developing a package is a lot of learning and enrichment. Soon I intend to increase the package with new utilities. In the meantime, feel free to use and test the package, I will be happy to receive any feedback!</span>
<span id="cb19-221"><a href="#cb19-221"></a></span>
<span id="cb19-222"><a href="#cb19-222"></a><span class="fu">## GitHub repo and documentation</span></span>
<span id="cb19-223"><a href="#cb19-223"></a></span>
<span id="cb19-224"><a href="#cb19-224"></a>Check the source code and other information in the package repository on <span class="co">[</span><span class="ot">GitHub</span><span class="co">](https://github.com/schoulten/meedr)</span>.</span>
<span id="cb19-225"><a href="#cb19-225"></a></span>
<span id="cb19-226"><a href="#cb19-226"></a>Check the package documentation on <span class="co">[</span><span class="ot">this page</span><span class="co">](https://fortietwo.com/meedr/)</span>.</span>
<span id="cb19-227"><a href="#cb19-227"></a></span>
<span id="cb19-228"><a href="#cb19-228"></a>{{&lt; include ../../R/_session_info_pt.qmd &gt;}}</span>
<span id="cb19-229"><a href="#cb19-229"></a>{{&lt; include ../../styles/html/_footer_pt.qmd &gt;}}</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Licensed under <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> <i class="fa-brands fa-creative-commons-sa" aria-label="creative-commons-sa"></i> <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></div>   
    <div class="nav-footer-center">Made with&nbsp;<a href="https://quarto.org/">Quarto</a></div>
    <div class="nav-footer-right">View the source at <a href="https://github.com/schoulten/schoulten.github.io"><i class="fa-brands fa-github" aria-label="github"></i> GitHub</a></div>
  </div>
</footer>


</body></html>